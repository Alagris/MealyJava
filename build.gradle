/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.0/userguide/java_library_plugin.html
 */

plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'
    id 'antlr'
    id 'java'
}

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

jar {
    manifest {
        attributes 'Main-Class': 'net.alagris.Compiler'
    }
}


task fatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': "net.alagris.Compiler"
    }
    baseName = "${rootProject.name}"
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

compileJava {
    sourceCompatibility = '1.9'
    targetCompatibility = '1.9'
}
dependencies {
    antlr "org.antlr:antlr4:4.7.1"
    compile "org.antlr:antlr4-runtime:4.7.1"
    
    testCompile("junit:junit:4.12")
    testRuntime("org.junit.vintage:junit-vintage-engine:4.12.0-M4")

    testCompile("org.junit.jupiter:junit-jupiter-api:5.0.0-M4")
    testRuntime("org.junit.jupiter:junit-jupiter-engine:5.0.0-M4")

    // Enable use of the JUnitPlatform Runner within the IDE
    testCompile("org.junit.platform:junit-platform-runner:1.0.0-M4")
    compile "org.jgrapht:jgrapht-core:1.5.0"
    
    compile group: 'com.mxgraph', name: 'jgraphx', version: '1.10.4.2'
    compile group: 'net.automatalib.distribution', name: 'automata-distribution', version: '0.9.0'

}

generateGrammarSource {
    maxHeapSize = "64m"
    arguments += ['-visitor', '-package', 'net.alagris']
    outputDirectory = new File("generated-src/antlr/main/net/alagris".toString())
}

sourceSets.main.java.srcDirs += 'generated-src/antlr/main/'

clean{
    delete "generated-src"
}
